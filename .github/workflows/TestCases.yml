name: Run SQL Tests

on:
  push:
    branches:
      - main

jobs:
  run-sql:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Oracle SQLcl
      run: |
        sudo apt-get update
        sudo apt-get install alien libaio1 unixodbc
        wget https://download.oracle.com/otn_software/java/sqldeveloper/sqlcl-latest.zip
        unzip sqlcl-latest.zip
        echo 'export PATH=/home/runner/sqlcl/bin:$PATH' >> ~/.bashrc
        source ~/.bashrc

    - name: Run SQL code
      run: |
        echo "Executing SQL command: sql shkuropatova/p1P34ab#@185.235.218.67:1521/XEPDB1 @TestCases.sql"
        sql "shkuropatova/p1P34ab#@185.235.218.67:1521/XEPDB1" @TestCases.sql
